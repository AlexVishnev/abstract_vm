Few Tips:

if stdin -> read every cmd and exec it

if parse file print errors and maybe logging it

Check if in file is EXIT